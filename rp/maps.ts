// Map defines for Fallout 2 Restoration Project, updated

// =============================================================================
// Area Names
// =============================================================================

export const AREA_ARROYO = 0;
export const AREA_DEN = 1;
export const AREA_KLAMATH = 2;
export const AREA_MODOC = 3;
export const AREA_VAULT_CITY = 4;
export const AREA_GECKO = 5;
export const AREA_BROKEN_HILLS = 6;
export const AREA_NEW_RENO = 7;
export const AREA_SIERRA_ARMY_BASE = 8;
export const AREA_VAULT_15 = 9;
export const AREA_NCR = 10;
export const AREA_VAULT_13 = 11;
export const AREA_MILITARY_BASE = 12;
export const AREA_REDDING = 13;
export const AREA_SAN_FRANCISCO = 14;
export const AREA_NAVARRO = 15;
export const AREA_THE_ENCLAVE = 16;
export const AREA_ABBEY = 17;
export const AREA_PRIMITIVE_TRIBE = 18;
export const AREA_EPA = 19;
export const AREA_GHOST_TOWN = 20;
export const AREA_CAR_OUTTA_GAS = 21;
export const AREA_ARROYO_DESTROYED = 22;
export const AREA_KLAMATH_TOXIC_CAVES = 23;
export const AREA_DEN_SLAVE_RUN = 24;
export const AREA_RAIDERS = 25;
export const AREA_RND_DESERT = 26;
export const AREA_RND_MOUNTAIN = 27;
export const AREA_RND_CITY = 28;
export const AREA_RND_COAST = 29;
export const AREA_GOLGATHA = 30;
export const AREA_SPECIAL_RND_WHALE = 31;
export const AREA_SPECIAL_RND_WOODSMAN = 32;
export const AREA_SPECIAL_RND_HEAD = 33;
export const AREA_SPECIAL_RND_SHUTTLE = 34;
export const AREA_SPECIAL_RND_UNWASHED = 35;
export const AREA_SPECIAL_RND_BRIDGE = 36;
export const AREA_SPECIAL_RND_CAFE = 37;
export const AREA_SPECIAL_RND_HOLY1 = 38;
export const AREA_SPECIAL_RND_HOLY2 = 39;
export const AREA_SPECIAL_RND_GUARDIAN = 40;
export const AREA_SPECIAL_RND_TOXIC = 41;
export const AREA_SPECIAL_RND_PARIAH = 42;
export const AREA_SPECIAL_RND_MAD_COW = 43;
export const AREA_CARAVAN_ENCOUNTER = 44;
export const AREA_FAKE_VAULT_13A = 45;
export const AREA_FAKE_VAULT_13B = 46;
export const AREA_SHADOW_MAPS = 47;
export const AREA_RENO_STABLES = 48;
export const AREA_VAULT_VILLAGE = 49;
export const AREA_SLAVER_CAMP = 50;
export const AREA_HUBOLOGIST_STASH = 51;
export const AREA_RANGER_SAFE1 = 52;
export const AREA_RANGER_SAFE2 = 53;
export const AREA_RANGER_SAFE3 = 54;
export const AREA_RP_EASTER_EGG = 55;
export const AREA_MERCHANT = 56;
export const AREA_VAULT_MERCHANT = 57;
export const AREA_SAN_FRAN_SUB = 58;
export const AREA_SAN_FRAN_DR_SHENG = 59;

// =============================================================================
// Map Names
// =============================================================================

export const MAP_RND_DESERT_1 = 0;
export const MAP_RND_DESERT_2 = 1;
export const MAP_RND_DESERT_3 = 2;
export const MAP_ARROYO_CAVES = 3;
export const MAP_ARROYO_VILLAGE = 4;
export const MAP_ARROYO_BRIDGE = 5;
export const MAP_DEN_ENTRANCE = 6;
export const MAP_DEN_BUSINESS = 7;
export const MAP_DEN_RESIDENTIAL = 8;
export const MAP_KLAMATH_1 = 9;
export const MAP_KLAMATH_MALL = 10;
export const MAP_KLAMATH_RATCAVES = 11;
export const MAP_KLAMATH_TOXICCAVES = 12;
export const MAP_KLAMATH_TRAPCAVES = 13;
export const MAP_KLAMATH_GRAZE = 14;
export const MAP_VAULTCITY_COURTYARD = 15;
export const MAP_VAULTCITY_DOWNTOWN = 16;
export const MAP_VAULTCITY_COUNCIL = 17;
export const MAP_MODOC_MAINSTREET = 18;
export const MAP_MODOC_BEDNBREAKFAST = 19;
export const MAP_MODOC_BRAHMINPASTURES = 20;
export const MAP_MODOC_GARDEN = 21;
export const MAP_MODOC_DOWNTHESHITTER = 22;
export const MAP_MODOC_WELL = 23;
export const MAP_GHOST_FARM = 24;
export const MAP_GHOST_CAVERN = 25;
export const MAP_GHOST_LAKE = 26;
export const MAP_SIERRA_BATTLE = 27;
export const MAP_SIERRA_123 = 28;
export const MAP_SIERRA_4 = 29;
export const MAP_VAULT_CITY_VAULT = 30;
export const MAP_GECKO_SETTLEMENT = 31;
export const MAP_GECKO_POWER_PLANT = 32;
export const MAP_GECKO_JUNKYARD = 33;
export const MAP_GECKO_ACCESS_TUNNELS = 34;
export const MAP_ARROYO_WILDERNESS = 35;
export const MAP_VAULT_15 = 36;
export const MAP_THE_SQUAT_A = 37;
export const MAP_THE_SQUAT_B = 38;
export const MAP_VAULT_15_EAST_ENTRANCE = 39;
export const MAP_VAULT_13 = 40;
export const MAP_VAULT_13_ENTRANCE = 41;
export const MAP_NCR_DOWNTOWN = 42;
export const MAP_NCR_COUNCIL = 43;
export const MAP_NCR_WESTIN_RANCH = 44;
export const MAP_NCR_GRAZING_LANDS = 45;
export const MAP_NCR_BAZAAR = 46;
// MAP_NCR_COUNCIL (47) - commented out in original
export const MAP_KLAMATH_CANYON = 48;
export const MAP_MILITARY_BASE_12 = 49;
export const MAP_MILITARY_BASE_34 = 50;
export const MAP_MILITARY_BASE_ENTRANCE = 51;
export const MAP_DEN_SLAVE_RUN = 52;
export const MAP_CAR_DESERT = 53;
export const MAP_NEW_RENO_1 = 54;
export const MAP_NEW_RENO_2 = 55;
export const MAP_NEW_RENO_3 = 56;
export const MAP_NEW_RENO_4 = 57;
export const MAP_NEW_RENO_CHOP_SHOP = 58;
export const MAP_NEW_RENO_GOLGATHA = 59;
export const MAP_NEW_RENO_STABLES = 60;
export const MAP_NEW_RENO_BOXING = 61;
export const MAP_REDDING_WANAMINGO_ENT = 62;
export const MAP_REDDING_WANAMINGO_12 = 63;
export const MAP_REDDING_DOWNTOWN = 64;
export const MAP_REDDING_MINE_ENT = 65;
export const MAP_REDDING_DTOWN_TUNNEL = 66;
export const MAP_REDDING_MINE_TUNNEL = 67;
export const MAP_RND_CITY1 = 68;
export const MAP_RND_CAVERN0 = 69;
export const MAP_RND_CAVERN1 = 70;
export const MAP_RND_CAVERN2 = 71;
export const MAP_RND_CAVERN3 = 72;
export const MAP_RND_CAVERN4 = 73;
export const MAP_RND_MOUNTAIN1 = 74;
export const MAP_RND_MOUNTAIN2 = 75;
export const MAP_RND_COAST1 = 76;
export const MAP_RND_COAST2 = 77;
export const MAP_BROKEN_HILLS1 = 78;
export const MAP_BROKEN_HILLS2 = 79;
export const MAP_RND_CAVERN5 = 80;
export const MAP_RND_DESERT4 = 81;
export const MAP_RND_DESERT5 = 82;
export const MAP_RND_DESERT6 = 83;
export const MAP_RND_DESERT7 = 84;
export const MAP_RND_COAST3 = 85;
export const MAP_RND_COAST4 = 86;
export const MAP_RND_COAST5 = 87;
export const MAP_RND_COAST6 = 88;
export const MAP_RND_COAST7 = 89;
export const MAP_RND_COAST8 = 90;
export const MAP_RND_COAST9 = 91;
export const MAP_RAIDERS_CAMP1 = 92;
export const MAP_RAIDERS_CAMP2 = 93;
export const MAP_BH_RND_DESERT = 94;
export const MAP_BH_RND_MOUNTAIN = 95;
export const MAP_SPECIAL_RND_WHALE = 96;
export const MAP_SPECIAL_RND_WOODSMAN = 97;
export const MAP_SPECIAL_RND_HEAD = 98;
export const MAP_SPECIAL_RND_SHUTTLE = 99;
export const MAP_SPECIAL_RND_UNWASHED = 100;
export const MAP_SPECIAL_RND_BRIDGE = 101;
export const MAP_SPECIAL_RND_CAFE = 102;
export const MAP_SPECIAL_RND_HOLY1 = 103;
export const MAP_SPECIAL_RND_HOLY2 = 104;
export const MAP_SPECIAL_RND_GUARDIAN = 105;
export const MAP_SPECIAL_RND_TOXIC = 106;
export const MAP_SPECIAL_RND_PARIAH = 107;
export const MAP_SPECIAL_RND_MAD_COW = 108;
export const MAP_NAVARRO_ENTRANCE = 109;
export const MAP_RND_COAST_10 = 110;
export const MAP_RND_COAST_11 = 111;
export const MAP_RND_COAST_12 = 112;
export const MAP_RND_DESERT_8 = 113;
export const MAP_RND_DESERT_9 = 114;
export const MAP_RND_DESERT_10 = 115;
export const MAP_RND_DESERT_11 = 116;
export const MAP_RND_DESERT_12 = 117;
export const MAP_RND_DESERT_13 = 118;
export const MAP_RND_CAVERN_6 = 119;
export const MAP_RND_CAVERN_7 = 120;
export const MAP_RND_MOUNTAIN_3 = 121;
export const MAP_RND_MOUNTAIN_4 = 122;
export const MAP_RND_MOUNTAIN_5 = 123;
export const MAP_RND_MOUNTAIN_6 = 124;
export const MAP_RND_CITY_2 = 125;
export const MAP_ARROYO_TEMPLE = 126;
export const MAP_DESTROYED_ARROYO_BRIDGE = 127;
export const MAP_ENCLAVE_DETENTION = 128;
export const MAP_ENCLAVE_DOCK = 129;
export const MAP_ENCLAVE_END_FIGHT = 130;
export const MAP_ENCLAVE_BARRACKS = 131;
export const MAP_ENCLAVE_PRESIDENT = 132;
export const MAP_ENCLAVE_REACTOR = 133;
export const MAP_ENCLAVE_TRAP_ROOM = 134;
export const MAP_SAN_FRAN_TANKER = 135;
export const MAP_SAN_FRAN_DOCK = 136;
export const MAP_SAN_FRAN_CHINATOWN = 137;
export const MAP_SHUTTLE_EXTERIOR = 138;
export const MAP_SHUTTLE_INTERIOR = 139;
export const MAP_ELRONOLOGIST_BASE = 140;
export const MAP_RND_CITY_3 = 141;
export const MAP_RND_CITY_4 = 142;
export const MAP_RND_CITY_5 = 143;
export const MAP_RND_CITY_6 = 144;
export const MAP_RND_CITY_7 = 145;
export const MAP_RND_CITY_8 = 146;
export const MAP_NEW_RENO_VB = 147;
export const MAP_SHI_TEMPLE = 148;
export const MAP_IN_GAME_MOVIE1 = 149;
export const MAP_BESS_DEAD = 150;
export const MAP_ABBEY_OUTSIDE = 151;
export const MAP_ABBEY_BASEMENT = 152;
export const MAP_ABBEY_CAVE = 153;
export const MAP_VAULT_VILLAGE = 154;
export const MAP_PRIMITIVE_TRIBE1 = 155;
export const MAP_PRIMITIVE_TRIBE2 = 156;
export const MAP_EPA = 157;
export const MAP_EPA_SUBLEVELS = 158;
export const MAP_EPA_SECRET = 159;
export const MAP_SLAVER_CAMP = 160;
export const MAP_GECKO_ENCLAVE_PATROL = 161;
export const MAP_HUBOLOGIST_STASH = 162;
export const MAP_RANGER_SAFE_HOUSE1 = 163;
export const MAP_RANGER_SAFE_HOUSE2 = 164;
export const MAP_RANGER_SAFE_HOUSE3 = 165;
export const MAP_EASTER = 166;
export const MAP_MERCHANT = 167;
export const MAP_VILMERCH = 168;
export const MAP_SAN_FRAN_SUB = 169;
export const MAP_EPA_SUBLEVELS_1 = 170;
export const MAP_EPA_SUBLEVELS_2 = 171;
export const MAP_SHENG_HIDEOUT = 172;

// =============================================================================
// Map String Defines
// =============================================================================

export const MAPSTR_ARBRDIGE = "arbridge.map";
export const MAPSTR_ARCAVES = "arcaves.map";
export const MAPSTR_ARGARDEN = "ARGARDEN.MAP";
export const MAPSTR_ARVILLAG = "arvillag.map";
export const MAPSTR_CARDSERT = "cardesrt.map";
export const MAPSTR_DEBBUS1 = "denbus1.map";
export const MAPSTR_DENBUS2 = "denbus2.map";
export const MAPSTR_DENRES1 = "denres1.map";
export const MAPSTR_DEPOLV1 = "depolv1.map";
export const MAPSTR_DEPOLVA = "depolvA.map";
export const MAPSTR_DEPOLVB = "depolvB.map";
export const MAPSTR_DNSLVRUN = "DNSlvRun.map";
export const MAPSTR_GECKPWPL = "GECKPWPL.map";
export const MAPSTR_GECKSETL = "GECKSETL.map";
export const MAPSTR_GSTCAV1 = "gstcav1.map";
export const MAPSTR_GSTCAV2 = "gstcav2.map";
export const MAPSTR_GSTFARM = "gstfarm.map";
export const MAPSTR_KLADWTWN = "kladwtwn.map";
export const MAPSTR_KLAGRAZ = "klagraz.map";
export const MAPSTR_KLAMALL = "KLAMALL.map";
export const MAPSTR_KLARATCV = "KLARATCV.map";
export const MAPSTR_KLATOXCV = "klatoxcv.map";
export const MAPSTR_KLATRAP = "klatrap.map";
export const MAPSTR_MODBRAH = "modbrah.map";
export const MAPSTR_MODGARD = "modgard.map";
export const MAPSTR_MODINN = "modinn.map";
export const MAPSTR_MODMAIN = "modmain.map";
export const MAPSTR_MODSHIT = "modshit.map";
export const MAPSTR_MODWELL = "modwell.map";
export const MAPSTR_NCR1 = "NCR1.MAP";
export const MAPSTR_NCR2 = "NCR2.MAP";
export const MAPSTR_NCR3 = "NCR3.MAP";
export const MAPSTR_NCR4 = "NCR4.MAP";
export const MAPSTR_NCRENT = "NCRENT.MAP";
export const MAPSTR_NCREX = "NCREX.MAP";
export const MAPSTR_V13ENT = "V13ENT.MAP";
export const MAPSTR_V13_ORIG = "V13_ORIG.map";
export const MAPSTR_V15ENTA = "V15ENTA.MAP";
export const MAPSTR_V15ENTB = "V15ENTB.MAP";
export const MAPSTR_V15SENT = "V15SENT.MAP";
export const MAPSTR_V15_ORIG = "V15_ORIG.map";
export const MAPSTR_VAULT13 = "VAULT13.MAP";
export const MAPSTR_VAULT15 = "VAULT15.MAP";
export const MAPSTR_VCTYCOCL = "VCTYCOCL.map";
export const MAPSTR_VCTYCTYD = "VCTYCTYD.map";
export const MAPSTR_VCTYDWTN = "VCTYDWTN.map";
export const MAPSTR_VCTYVLT = "VCTYVLT.map";
export const MAPSTR_NEWRBA = "NEWRBA.map";
export const MAPSTR_NEWR1 = "newr1.map";
export const MAPSTR_REDWAME = "REDWAME.map";
export const MAPSTR_REDWAN1 = "REDWAN1.map";
export const MAPSTR_REDDOWN = "REDDOWN.map";
export const MAPSTR_REDMENT = "REDMENT.map";
export const MAPSTR_REDDTUN = "REDDTUN.map";
export const MAPSTR_REDMTUN = "REDMTUN.map";
export const MAPSTR_CITY1 = "CITY1.map";
export const MAPSTR_CAVE0 = "CAVE0.map";
export const MAPSTR_CAVE1 = "CAVE1.map";
export const MAPSTR_CAVE2 = "CAVE2.map";
export const MAPSTR_CAVE3 = "CAVE3.map";
export const MAPSTR_CAVE4 = "CAVE4.map";
export const MAPSTR_MOUNTN1 = "MOUNTN1.map";
export const MAPSTR_MOUNTN2 = "MOUNTN2.map";
export const MAPSTR_COAST1 = "COAST1.MAP";
export const MAPSTR_COAST2 = "COAST2.MAP";
export const MAPSTR_BROKEN1 = "BROKEN1.MAP";
export const MAPSTR_BROKEN2 = "BROKEN2.MAP";
export const MAPSTR_CAVE5 = "CAVE5.MAP";
export const MAPSTR_DESERT4 = "DESERT4.MAP";
export const MAPSTR_DESERT5 = "DESERT5.MAP";
export const MAPSTR_DESERT6 = "DESERT6.MAP";
export const MAPSTR_DESERT7 = "DESERT7.MAP";
export const MAPSTR_COAST3 = "COAST3.MAP";
export const MAPSTR_COAST4 = "COAST4.MAP";
export const MAPSTR_COAST5 = "COAST5.MAP";
export const MAPSTR_COAST6 = "COAST6.MAP";
export const MAPSTR_COAST7 = "COAST7.MAP";
export const MAPSTR_COAST8 = "COAST8.MAP";
export const MAPSTR_COAST9 = "COAST9.MAP";
export const MAPSTR_RAIDERS1 = "RAIDERS1.MAP";
export const MAPSTR_RAIDERS2 = "RAIDERS2.MAP";
export const MAPSTR_BHRNDDST = "BHRNDDST.MAP";
export const MAPSTR_BHRNDMNT = "BHRNDMNT.MAP";
export const MAPSTR_RNDWHALE = "RNDWHALE.MAP";
export const MAPSTR_RNDTINWD = "RNDTINWD.MAP";
export const MAPSTR_RNDBHEAD = "RNDBHEAD.MAP";
export const MAPSTR_RNDSHUTL = "RNDSHUTL.MAP";
export const MAPSTR_RNDUWILG = "RNDUWILG.MAP";
export const MAPSTR_RNDBRIDG = "RNDBRIDG.MAP";
export const MAPSTR_RNDCAFE = "RNDCAFE.MAP";
export const MAPSTR_RNDHOLY1 = "RNDHOLY1.MAP";
export const MAPSTR_RNDHOLY2 = "RNDHOLY2.MAP";
export const MAPSTR_RNDFORVR = "RNDFORVR.MAP";
export const MAPSTR_RNDTOXIC = "RNDTOXIC.MAP";
export const MAPSTR_RNDPARIH = "RNDPARIH.MAP";
export const MAPSTR_RNDEXCOW = "RNDEXCOW.MAP";
export const MAPSTR_NAVARRO = "NAVARRO.MAP";

// =============================================================================
// Map Entrance Points
// =============================================================================

export const DEN_SLAVE_RUN_SUCCESS = 10;

// =============================================================================
// Map Utility Functions (converted from macros)
// =============================================================================

import { ObjectPtr } from "../index";
import { override_map_start, anim, rotation_to_tile, tile_num } from "../base.d";
import { ANIMATE_ROTATION } from "./animcomd";

/**
 * Override map start using hex tile number
 * Converts hex to x,y coordinates
 * @inline
 */
export function override_map_start_hex(hex: number, elev: number, rot: number): void {
    override_map_start(hex % 200, hex / 200, elev, rot);
}

/**
 * Make critter X face critter Y
 * @inline
 */
export function face_critter(target: ObjectPtr, who: ObjectPtr): void {
    anim(who, ANIMATE_ROTATION, rotation_to_tile(tile_num(who), tile_num(target)));
}

/**
 * Normalize rotation to 0-5 range
 */
export function fix_rotation_arc(rot: number): number {
    while (rot < 0) {
        rot += 6;
    }
    if (rot > 5) {
        rot = rot % 6;
    }
    return rot;
}

/**
 * Get inverse rotation (opposite direction)
 * @inline
 */
export function invert_rotation(rot: number): number {
    return fix_rotation_arc(rot + 3);
}
